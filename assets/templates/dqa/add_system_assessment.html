{% extends 'dqa/index_dqa.html' %}
{% load crispy_forms_tags %}
{% load static %}


{% block content %}
<main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
 <h6 class="display-6 text-primary">HIV DQA Facility Data Verification Assessment Tool</h6>
<hr>



    <div class="p-5 mb-4 bg-light rounded-3">

    {% if messages %}
    <ul class="messages">
        {% for message in messages %}
            <div class="alert alert-info col-12" role="alert">
        <h5 class="d-flex justify-content-evenly">{{ message }}</h5>
    </div>
{#            <li{% if message.0.tags %} class="{{ message.0.tags }}"{% endif %}>{{ message }}</li>#}
        {% endfor %}
    </ul>
{% endif %}

      <div class="container-fluid">
      {% if "facility" in title %}
      <h6 class="display-6 fw-bold text-primary">CREATE FACILITY QI</h6>
      {% elif "program" in title %}
          <h6 class="display-6 fw-bold text-primary">CREATE {{ title|upper }} QI</h6>
      {% endif %}
{#          <div class="d-flex justify-content-between">#}
{#              <a href="{% url 'add_qi_manager' %}" class="btn btn-success" role="button">ADD QI MANAGER</a>#}
{#              <a href="{% url 'add_department' %}" class="btn btn-success" role="button">ADD DEPARTMENT</a>#}
{#              <a href="{% url 'add_category' %}" class="btn btn-success" role="button">ADD PROJECT COMPONENT</a>#}
{#              <a href="{% url 'add_facility' %}" class="btn btn-success" role="button">ADD FACILITY</a>#}
{#              <a href="{% url 'add_county' %}" class="btn btn-success" role="button">ADD COUNTY</a>#}
{#              <a href="{% url 'add_hub' %}" class="btn btn-success" role="button">ADD HUB</a>#}
{#              <a href="{% url 'add_subcounty' %}" class="btn btn-success" role="button">ADD SUBCOUNTY</a>#}
{#          </div>#}
      <div>
        <a href="{% url 'show_data_verification' %}" class="btn btn-secondary mb-5" role="button">VIEW DQA DATA</a>
   </div>
{#       <form class="row g-3" method="POST" class="mt-5" enctype='multipart/form-data' autocomplete="off">#}
{#   {% csrf_token %}#}
{# <p> Please choose period of interest and then submit </p>#}
{#            <div class="col-md-4">#}
{#                 {{ quarter_form.quarter|as_crispy_field }}#}
{#                 </div>#}
{#           <div class="col-md-4">#}
{#                 {{ year_form.year|as_crispy_field  }}#}
{#                 </div>#}
{#           <div class="col-md-4">#}
{#                 {{ facility_form.name|as_crispy_field  }}#}
{#                 </div>#}
{#           <div class="col-md-4">#}
{#                 {{ date_form.date|as_crispy_field  }}#}
{#                 </div>#}
{##}
{#           <div class="col-md-3 mt-4 pt-2">#}
{#                <input class="btn btn-success mt-1" type="submit" name="submit_data" value="Submit">#}
{#            </div>#}
{##}
{#       </form>#}

{#      {% for key,months in quarters.items %}#}
{#          {% for month in months|slice:":1" %}#}
{#              {% if "January" not in month or messages %}#}
{#                  <form class="row g-3" method="POST" class="mt-5" enctype='multipart/form-data' autocomplete="off">#}
{#   {% csrf_token %}#}
{#                  <p> Enter data below and then submit </p>#}
{#                  <div class="col-md-4">#}
{#             {{ forms.facility_name|as_crispy_field }}#}
{#             </div>#}
{#                  <div class="col-md-4">#}
{#             {{ forms.dropdown_option|as_crispy_field }}#}
{#             </div>#}
{#            <div class="col-md-4">#}
{#             {{ forms.dqa_date|as_crispy_field }}#}
{#             </div>#}
{##}
{##}
{##}
{#        <table class="table table-striped table-hover" style="font-size: small;">#}
{#    <thead class="thead-dark">#}
{#          <tr>#}
{#            <th colspan="3" style="font-size: x-small"> Primary Data source (Registers/EMR) </th>#}
{##}
{#            <th colspan="3" style="font-size: x-small"> Verification MOH 731 </th>#}
{##}
{#            <th colspan="3" style="font-size: x-small"> Verification KHIS </th>#}
{##}
{##}
{#         </tr>#}
{#           <tr>#}
{##}
{#            <th colspan="3" style="font-size: x-small"> VALUE COUNTED FROM SOURCE </th>#}
{##}
{#            <th colspan="3" style="font-size: x-small"> VALUE REPORTED (MOH 731) </th>#}
{##}
{#            <th colspan="3" style="font-size: x-small"> NUMBER IN KHIS </th>#}
{##}
{##}
{#         </tr>#}
{#            <tr>#}
{##}
{##}
{#            {% for key,months in quarters.items %}#}
{#                {% for month in months %}#}
{#                    <th> {{ month }} </th>#}
{#                {% endfor %}#}
{#                {% for month in months %}#}
{#                        <th> {{ month }} </th>#}
{#                {% endfor %}#}
{#                {% for month in months %}#}
{#                        <th> {{ month }} </th>#}
{#                {% endfor %}#}
{##}
{#            {% endfor %}#}
{#            </tr>#}
{#          </thead>#}
{#          <tbody>#}
{#          {% for system_assessment in system_assessments %}#}
{#              <tr>#}
{#                  <td>{{ forloop.counter }}</td>#}
{#                  <td>{{ system_assessment.description }}</td>#}
{#              </tr>#}
{#          {% endfor %}#}
{##}
{##}
{#            <tr>#}
{#              {% for field in form %}#}
{#                  {% if "total" not in field.html_name %}#}
{#                    <td> {{ field|as_crispy_field }} </td>#}
{#                  {% endif %}#}
{##}
{#              {% endfor %}#}
{##}
{#              {% for field in form|slice:"2:6" %}#}
{#                {% if "total" not in field.html_name %}#}
{#                    <td> {{ field|as_crispy_field }} </td>#}
{#                  {% endif %}#}
{#              {% endfor %}#}
{#              {% for field in form|slice:"13:17" %}#}
{#                {% if "total" not in field.html_name %}#}
{#                    <td> {{ field|as_crispy_field }} </td>#}
{#                  {% endif %}#}
{#              {% endfor %}#}
{#            </tr>#}
{#          </tbody>#}
{#        </table>#}
{#         <div class="col-md-3 mt-4 pt-2">#}
{#                <input class="btn btn-success mt-1" type="submit" name="submit_data" value="Submit">#}
{#            </div>#}
{#            {% if form.errors %}#}
{#                <div class="alert alert-danger">#}
{#                  <strong> Please correct the following errors :</strong>#}
{#                  <ul>#}
{#                    {% for error in form.errors %}#}
{#                      <li> {{ error }} </li>#}
{#                    {% endfor %}#}
{#                  </ul>#}
{#                </div>#}
{#            {% endif %}#}
{#        </form>#}
{##}
{#              {% endif %}#}
{#          {% endfor %}#}
{#    {% endfor %}#}
      <form method="post">
  {% csrf_token %}
  {{ formset.management_form }}
<table class="table table-striped table-hover" style="font-size: small;">
  <thead class="thead-dark">
    <tr>
      <th>Component of the M&E System </th>
      <th>Answer</th>
{#      <th>Facility Name</th>#}
{#      <th>Quarter Year</th>#}
{#      <th>Component</th>#}
      <th>Auditor Note</th>
      <th>Supporting Documentation Required</th>
{#      <th>DQA Date</th>#}
{#      <th>Calculations</th>#}
    </tr>
  </thead>
  <tbody>
    {% for system_assessment in system_assessments %}
      <tr>
        <td>{{ system_assessment.description }}</td>
        {% for field in formset.management_form %}
          <td>{{ field }}</td>
        {% endfor %}
        {% for form in formset %}
          {% if form.instance == system_assessment %}
            <td>{{ form.dropdown_option }}</td>
{#            <td>{{ form.facility_name }}</td>#}
{#            <td>{{ form.quarter_year }}</td>#}
{#            <td>{{ form.component }}</td>#}
            <td>{{ form.auditor_note }}</td>
            <td>{{ form.supporting_documentation_required }}</td>
{#            <td>{{ form.dqa_date }}</td>#}
{#            <td>{{ form.calculations }}</td>#}
          {% endif %}
        {% endfor %}
      </tr>
    {% endfor %}
  </tbody>
</table>

 <button type="submit">Save</button>
</form>




      </div>
    </div>
</main>
{% endblock %}